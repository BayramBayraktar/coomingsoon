<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css">
    <title>Mektup Cezaevine - Mektup Gönder</title>
    <style>
        .form-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-header {
            text-align: center;
            margin: 30px 0px;
        }
        .form-header p {
            font-size: 12px;
        }
    

        .form-title {
            font-size: 1.5rem;
            color: #4a5568;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }

        .required:after {
            content: " *";
            color: #e53e3e;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s, background-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            border-color: #667eea;
            outline: none;
        }

        .optional {
            color: #718096;
            font-size: 0.9rem;
            font-style: italic;
        }

        .color-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .color-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .color-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }

        .color-box.selected {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .file-upload {
            border: 2px dashed #e2e8f0;
            padding: 2rem;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 1rem;
        }

        .file-upload input {
            display: none;
        }

        .file-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .preview-item {
            width: 100px;
            position: relative;
        }

        .preview-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
        }

        .remove-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #e53e3e;
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .submit-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }

        .submit-btn:hover {
            background: #5a67d8;
        }

        .two-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        /* Mektup içeriği textarea'sı için özel stiller */
        #letterContent {
            background-color: #ffffff;
            transition: background-color 0.3s ease;
        }

        @media (max-width: 768px) {
            .two-columns {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <a href="/index.html" class="logo">
                <img src="./assets/images/M.png" alt="Mektup Cezaevine Logo" class="logo-img">
                <span class="logo-text">Mektup Cezaevine</span>
            </a>
            <ul class="nav-links">
                <li><a href="/index.html">Anasayfa</a></li>
                <li><a class="active" href="/letterwrite.html">Mektup Yaz</a></li>
                <li><a href="/features.html">Özellikler</a></li>
                <li><a href="/download.html">İndir</a></li>
            </ul>
        </nav>
    </header>

    <section class="form-container">
        <div class="form-header">
            <h1>Cezaevine Mektup Gönder</h1>
            <p>Sevdiklerinize mektup göndermek için aşağıdaki formu doldurunuz.</p>
        </div>

        <form id="letterForm">


            <!-- Mektup İçeriği -->
            <div class="form-section">
                <h2 class="form-title">Mektup İçeriği</h2>
                <div class="form-group">
                    <label for="letterContent" class="required">Mektup Metni</label>
                    <textarea id="letterContent" name="letterContent" rows="10" required></textarea>
                </div>
            </div>

            <!-- Mektup Özelleştirme (İsteğe Bağlı) -->
            <div class="form-section">
                <h2 class="form-title">Mektup Özelleştirme <span class="optional">(isteğe bağlı)</span></h2>
                <div class="two-columns">
                    <div class="form-group">
                        <label>Zarf Rengi</label>
                        <div class="color-options">
                            <div class="color-option">
                                <div class="color-box selected" style="background-color: #ffffff; border: 1px solid #ddd;" data-color="white" data-type="envelope">
                                </div>
                                <span>Beyaz</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #4299e1;" data-color="blue" data-type="envelope"></div>
                                <span>Mavi</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #f56565;" data-color="red" data-type="envelope"></div>
                                <span>Kırmızı</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #ed64a6;" data-color="pink" data-type="envelope"></div>
                                <span>Pembe</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #48bb78;" data-color="green" data-type="envelope"></div>
                                <span>Yeşil</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #ecc94b;" data-color="yellow" data-type="envelope"></div>
                                <span>Sarı</span>
                            </div>
                        </div>
                        <input type="hidden" id="envelopeColor" name="envelopeColor" value="white">
                    </div>
                    <div class="form-group">
                        <label>Kağıt Rengi</label>
                        <div class="color-options">
                            <div class="color-option">
                                <div class="color-box selected" style="background-color: #ffffff; border: 1px solid #ddd;" data-color="white" data-type="paper">
                                </div>
                                <span>Beyaz</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #fffff0;" data-color="cream" data-type="paper"></div>
                                <span>Krem</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #fed7d7;" data-color="light-pink" data-type="paper"></div>
                                <span>Pembe</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #bee3f8;" data-color="light-blue" data-type="paper"></div>
                                <span>Mavi</span>
                            </div>
                            <div class="color-option">
                                <div class="color-box" style="background-color: #faf089;" data-color="light-yellow" data-type="paper">
                                </div>
                                <span>Sarı</span>
                            </div>
                        </div>
                        <input type="hidden" id="paperColor" name="paperColor" value="white">
                    </div>
                </div>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="letterScent">Koku</label>
                        <select id="letterScent" name="letterScent">
                            <option value="none">Koku Yok</option>
                            <option value="rose">Gül</option>
                            <option value="lavender">Lavanta</option>
                            <option value="jasmine">Yasemin</option>
                            <option value="narcissus">Nergis</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="includeCalendar" name="includeCalendar">
                            Zarf içine takvim ekle
                        </label>
                    </div>
                </div>
            </div>

            <!-- Resim Yükleme (İsteğe Bağlı) -->
            <div class="form-section">
                <h2 class="form-title">Resim Ekleme <span class="optional">(isteğe bağlı, maksimum 10 adet)</span></h2>
                <div class="file-upload" id="imageUploadArea">
                    <label for="imageUpload" style="cursor: pointer;">
                        <p>Resimlerinizi sürükleyip bırakın veya <span style="color: #667eea;">tıklayarak seçin</span>
                        </p>
                        <p><small>JPEG veya PNG formatlarında (Her resim max 5MB)</small></p>
                    </label>
                    <input type="file" id="imageUpload" name="imageUpload" multiple accept="image/*"
                        style="display: none;">
                </div>
                <div class="file-preview" id="imagePreview"></div>
            </div>

            <!-- Belge Yükleme (İsteğe Bağlı) -->
            <div class="form-section">
                <h2 class="form-title">Belge Ekleme <span class="optional">(isteğe bağlı, maksimum 10 adet)</span></h2>
                <div class="file-upload" id="documentUploadArea">
                    <label for="documentUpload" style="cursor: pointer;">
                        <p>Belgelerinizi sürükleyip bırakın veya <span style="color: #667eea;">tıklayarak seçin</span>
                        </p>
                        <p><small>PDF formatında (Her belge max 5MB)</small></p>
                    </label>
                    <input type="file" id="documentUpload" name="documentUpload" multiple accept=".pdf"
                        style="display: none;">
                </div>
                <div class="file-preview" id="documentPreview"></div>
            </div>

            <!-- Gönderen Bilgileri -->
            <div class="form-section">
                <h2 class="form-title">Gönderen Bilgileri</h2>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="senderName" class="required">Adınız Soyadınız</label>
                        <input type="text" id="senderName" name="senderName" required>
                    </div>
                    <div class="form-group">
                        <label for="senderEmail" class="required">E-posta Adresiniz</label>
                        <input type="email" id="senderEmail" name="senderEmail" required>
                    </div>
                </div>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="senderPhone" class="required">Telefon Numaranız</label>
                        <input type="tel" id="senderPhone" name="senderPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="senderCity" class="required">İliniz</label>
                        <select id="senderCity" name="senderCity" required>
                            <option value="">Seçiniz</option>
                            <option value="istanbul">İstanbul</option>
                            <option value="ankara">Ankara</option>
                            <!-- Diğer iller buraya eklenecek -->
                        </select>
                    </div>
                </div>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="senderDistrict" class="required">İlçeniz</label>
                        <input type="text" id="senderDistrict" name="senderDistrict" required>
                    </div>
                    <div class="form-group">
                        <label for="senderAddress" class="required">Adresiniz</label>
                        <input type="text" id="senderAddress" name="senderAddress" required>
                    </div>
                </div>
            </div>

            <!-- Alıcı Bilgileri -->
            <div class="form-section">
                <h2 class="form-title">Alıcı Bilgileri</h2>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="receiverName" class="required">Alıcı Adı Soyadı</label>
                        <input type="text" id="receiverName" name="receiverName" required>
                    </div>
                    <div class="form-group">
                        <label for="receiverFather">Alıcının Baba Adı <span class="optional">(isteğe
                                bağlı)</span></label>
                        <input type="text" id="receiverFather" name="receiverFather">
                    </div>
                </div>
                <div class="two-columns">
                    <div class="form-group">
                        <label for="prisonCity" class="required">Cezaevi Bulunduğu İl</label>
                        <select id="prisonCity" name="prisonCity" required>
                            <option value="">Seçiniz</option>
                            <option value="istanbul">İstanbul</option>
                            <option value="ankara">Ankara</option>
                            <!-- Diğer iller buraya eklenecek -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="prisonName" class="required">Cezaevi</label>
                        <select id="prisonName" name="prisonName" required>
                            <option value="">Önce il seçiniz</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="receiverRoom">Koğuş Numarası <span class="optional">(isteğe bağlı)</span></label>
                    <input type="text" id="receiverRoom" name="receiverRoom">
                </div>
            </div>

            <!-- Gönder Butonu -->
            <div class="form-group">
                <button type="submit" class="submit-btn">MEKTUBU GÖNDER</button>
            </div>
        </form>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 Mektup Cezaevine. Tüm hakları saklıdır.</p>
            <p style="margin-top: 1rem;">
                <a href="/privacypolicy.html" style="color: #667eea; text-decoration: none; margin: 0 1rem;">Gizlilik
                    Politikası Ve K.V.K.K</a>
                <a href="/distanceSalesContact.html"
                    style="color: #667eea; text-decoration: none; margin: 0 1rem;">Satış Sözleşmesi</a>
            </p>
        </div>
    </footer>

    <script>
        // Kağıt renkleri için hex değerler
        const paperColors = {
            'white': '#ffffff',
            'cream': '#fffff0',
            'light-pink': '#fed7d7',
            'light-blue': '#bee3f8',
            'light-yellow': '#faf089'
        };

        // Renk seçimi işlevselliği
        document.querySelectorAll('.color-box').forEach(box => {
            box.addEventListener('click', function () {
                const colorType = this.getAttribute('data-type');
                
                // Önce aynı tip içindeki tüm seçili sınıfları kaldır
                this.parentElement.parentElement.querySelectorAll('.color-box').forEach(b => {
                    b.classList.remove('selected');
                });

                // Tıklananı seçili yap
                this.classList.add('selected');

                const color = this.getAttribute('data-color');
                
                // İlgili hidden input'un değerini güncelle
                if (colorType === 'envelope') {
                    document.getElementById('envelopeColor').value = color;
                } else if (colorType === 'paper') {
                    document.getElementById('paperColor').value = color;
                    
                    // Mektup içeriği textarea'sının arka plan rengini değiştir
                    const letterContent = document.getElementById('letterContent');
                    const hexColor = paperColors[color];
                    letterContent.style.backgroundColor = hexColor;
                }
            });
        });

        // Resim yükleme ve önizleme
        const imageUpload = document.getElementById('imageUpload');
        const imagePreview = document.getElementById('imagePreview');
        let images = [];

        imageUpload.addEventListener('change', function (e) {
            const newFiles = Array.from(e.target.files);

            // Toplam dosya sayısı kontrolü
            if (images.length + newFiles.length > 10) {
                alert('Maksimum 10 resim yükleyebilirsiniz!');
                return;
            }

            // Dosya boyutu kontrolü (5MB)
            for (const file of newFiles) {
                if (file.size > 5 * 1024 * 1024) {
                    alert(`${file.name} dosyası çok büyük! Maksimum dosya boyutu 5MB'dır.`);
                    return;
                }
            }

            images = [...images, ...newFiles];
            updateImagePreview();
        });

        function updateImagePreview() {
            imagePreview.innerHTML = '';

            images.forEach((file, index) => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';

                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    previewItem.appendChild(img);

                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-btn';
                    removeBtn.innerHTML = '×';
                    removeBtn.addEventListener('click', () => removeImage(index));
                    previewItem.appendChild(removeBtn);

                    imagePreview.appendChild(previewItem);
                };
                reader.readAsDataURL(file);
            });
        }

        function removeImage(index) {
            images.splice(index, 1);
            updateImagePreview();
        }

        // Belge yükleme ve önizleme
        const documentUpload = document.getElementById('documentUpload');
        const documentPreview = document.getElementById('documentPreview');
        let documents = [];

        documentUpload.addEventListener('change', function (e) {
            const newFiles = Array.from(e.target.files);

            // Toplam dosya sayısı kontrolü
            if (documents.length + newFiles.length > 10) {
                alert('Maksimum 10 belge yükleyebilirsiniz!');
                return;
            }

            // Dosya boyutu kontrolü (5MB)
            for (const file of newFiles) {
                if (file.size > 5 * 1024 * 1024) {
                    alert(`${file.name} dosyası çok büyük! Maksimum dosya boyutu 5MB'dır.`);
                    return;
                }
            }

            documents = [...documents, ...newFiles];
            updateDocumentPreview();
        });

        function updateDocumentPreview() {
            documentPreview.innerHTML = '';

            documents.forEach((file, index) => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';

                previewItem.innerHTML = `
                    <img src="./assets/images/pdf-icon.png" alt="PDF" style="width: 100%; height: 100px; object-fit: contain; background: #f0f0f0; padding: 10px; border-radius: 5px;">
                    <p style="margin-top: 5px; font-size: 12px; text-align: center; word-break: break-all;">${file.name}</p>
                `;

                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-btn';
                removeBtn.innerHTML = '×';
                removeBtn.addEventListener('click', () => removeDocument(index));
                previewItem.appendChild(removeBtn);

                documentPreview.appendChild(previewItem);
            });
        }

        function removeDocument(index) {
            documents.splice(index, 1);
            updateDocumentPreview();
        }

        // Cezaevi seçimi
        document.getElementById('prisonCity').addEventListener('change', function () {
            const prisonNameSelect = document.getElementById('prisonName');
            prisonNameSelect.innerHTML = '<option value="">Seçiniz</option>';

            if (this.value === 'istanbul') {
                addPrisonOption(prisonNameSelect, 'silivri', 'Silivri Cezaevi');
                addPrisonOption(prisonNameSelect, 'metris', 'Metris Cezaevi');
            } else if (this.value === 'ankara') {
                addPrisonOption(prisonNameSelect, 'sincan', 'Sincan Cezaevi');
                addPrisonOption(prisonNameSelect, 'ulucanlar', 'Ulucanlar Cezaevi');
            }
        });

        function addPrisonOption(selectElement, value, text) {
            const option = document.createElement('option');
            option.value = value;
            option.textContent = text;
            selectElement.appendChild(option);
        }

        // Form gönderimi
        document.getElementById('letterForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Form verilerini topla
            const formData = new FormData();
            formData.append('senderName', document.getElementById('senderName').value);
            formData.append('senderEmail', document.getElementById('senderEmail').value);
            formData.append('senderPhone', document.getElementById('senderPhone').value);
            formData.append('senderCity', document.getElementById('senderCity').value);
            formData.append('senderDistrict', document.getElementById('senderDistrict').value);
            formData.append('senderAddress', document.getElementById('senderAddress').value);
            formData.append('receiverName', document.getElementById('receiverName').value);
            formData.append('receiverFather', document.getElementById('receiverFather').value);
            formData.append('prisonCity', document.getElementById('prisonCity').value);
            formData.append('prisonName', document.getElementById('prisonName').value);
            formData.append('receiverRoom', document.getElementById('receiverRoom').value);
            formData.append('letterContent', document.getElementById('letterContent').value);
            formData.append('envelopeColor', document.getElementById('envelopeColor').value);
            formData.append('paperColor', document.getElementById('paperColor').value);
            formData.append('letterScent', document.getElementById('letterScent').value);
            formData.append('includeCalendar', document.getElementById('includeCalendar').checked);

            // Resimleri ekle
            images.forEach(file => {
                formData.append('images', file);
            });

            // Belgeleri ekle
            documents.forEach(file => {
                formData.append('documents', file);
            });

            // Burada formData'yı sunucuya gönderebilirsiniz
            console.log('Form verileri:', Object.fromEntries(formData.entries()));

            // Demo amaçlı alert
            alert('Mektup gönderim formu başarıyla tamamlandı! (Bu bir demo mesajıdır)');
        });

        // Sürükle bırak işlevselliği (Resimler)
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            imageUpload.parentElement.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            imageUpload.parentElement.addEventListener(eventName, highlightImageArea, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            imageUpload.parentElement.addEventListener(eventName, unhighlightImageArea, false);
        });

        function highlightImageArea() {
            imageUpload.parentElement.style.borderColor = '#667eea';
            imageUpload.parentElement.style.backgroundColor = '#f0f4ff';
        }

        function unhighlightImageArea() {
            imageUpload.parentElement.style.borderColor = '#e2e8f0';
            imageUpload.parentElement.style.backgroundColor = '';
        }

        imageUpload.parentElement.addEventListener('drop', handleImageDrop, false);

        function handleImageDrop(e) {
            const dt = e.dataTransfer;
            const droppedFiles = dt.files;

            imageUpload.files = droppedFiles;
            const event = new Event('change');
            imageUpload.dispatchEvent(event);
        }

        // Sürükle bırak işlevselliği (Belgeler)
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            documentUpload.parentElement.addEventListener(eventName, preventDefaults, false);
        });

        ['dragenter', 'dragover'].forEach(eventName => {
            documentUpload.parentElement.addEventListener(eventName, highlightDocumentArea, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            documentUpload.parentElement.addEventListener(eventName, unhighlightDocumentArea, false);
        });

        function highlightDocumentArea() {
            documentUpload.parentElement.style.borderColor = '#667eea';
            documentUpload.parentElement.style.backgroundColor = '#f0f4ff';
        }

        function unhighlightDocumentArea() {
            documentUpload.parentElement.style.borderColor = '#e2e8f0';
            documentUpload.parentElement.style.backgroundColor = '';
        }

        documentUpload.parentElement.addEventListener('drop', handleDocumentDrop, false);

        function handleDocumentDrop(e) {
            const dt = e.dataTransfer;
            const droppedFiles = dt.files;

            documentUpload.files = droppedFiles;
            const event = new Event('change');
            documentUpload.dispatchEvent(event);
        }
    </script>
</body>

</html>